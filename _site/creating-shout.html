<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Shout to Me Android SDK</title>
  <meta name="description" content="The Shout to Me Android SDK Documentation provides information, reference, and examples of how to incorporate Shout to Me platform functionality into your An...">

  <link rel="stylesheet" href="/stm-sdk-android/assets/main.css">
  <link rel="canonical" href="/stm-sdk-android/creating-shout.html">
  <link rel="alternate" type="application/rss+xml" title="Shout to Me Android SDK" href="/stm-sdk-android/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/stm-sdk-android/">Shout to Me Android SDK</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
          <a class="page-link" href="/stm-sdk-android/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">

  <div style="width:100%">
    <div style="float:left;width:170px;margin-top:50px;margin-left: -170px;">
      <div>Android SDK</div>
      <ul style="margin-left:10px;list-style: none">
        <li><a href="/stm-sdk-android/">Home</a></li>
        <li><a href="getting-started">Getting Started</a>
          <ul>
            <li><a href="setup">Setup</a></li>
            <li><a href="sample-app">Sample App</a></li>
          </ul>
        </li>
        <li><a href="stm-service">StmService</a></li>
        <li><a href="creating-a-shout">Recording</a></li>
        <li><a href="notifications">Messages and Notifications</a></li>
        <li><a href="reference">Reference</a></li>

      </ul>
    </div>
    <div style="width:100%;">
      <h1 id="creating-a-shout">Creating a Shout</h1>

<p>There are two ways to create a shout using the Shout to Me SDK:</p>

<ol>
  <li>Using the recording overlay activity</li>
  <li>Uploading a media file</li>
</ol>

<h2 id="recording-overlay">Recording Overlay</h2>
<p><img src="https://s3-us-west-2.amazonaws.com/sdk-public-images/sample-app-4.png" style="float:right" />
The StmRecorderActivity class provides client apps a way to capture audio and send it to the Shout to Me platform. It is
implemented as a native <a href="http://developer.android.com/reference/android/app/Activity.html">Android Activity</a> to allow
developers to quickly and easily enable recording in a client app.  When the StmRecorderActivity is launched, the
following will occur:</p>

<ol>
  <li>The StmRecorderActivity is displayed to the user</li>
  <li>Audio recording immediately begins</li>
  <li>The user is presented with two options
    <ul>
      <li>A “Done” button; when pressed, this will stop the recording and send the recorded audio to the server.  The StmRecorderActivity will then be closed.</li>
      <li>A “Cancel” icon; when pressed, the recording will be stopped and the StmRecorderActivity will be closed.</li>
    </ul>
  </li>
</ol>

<div style="clear:right">&nbsp;</div>
<p>There is also the ability to provide an optional callback if you would like to receive a Shout object following the creation of the shout.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">stmService</span><span class="o">.</span><span class="na">setShoutCreationCallback</span><span class="o">(</span><span class="k">new</span> <span class="n">Callback</span><span class="o">&lt;</span><span class="n">Shout</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="n">StmResponse</span><span class="o">&lt;</span><span class="n">Shout</span><span class="o">&gt;</span> <span class="n">stmResponse</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Shout</span> <span class="n">shout</span> <span class="o">=</span> <span class="n">stmResponse</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">StmError</span> <span class="n">stmError</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// An error occurred during shout creation</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<h3 id="launching-the-stmrecorderactivity">Launching the StmRecorderActivity</h3>
<p>Launching the StmRecorderActivity is done using standard Android Activity functionality.  You can pass in certain extras
to provide additional data.</p>

<p>The first piece of data, the maximum recording time in seconds, is required and will set
a hard limit for how long the user can recording their shout.  A countdown will also be shown on the overlay to let the
user know how long they have to record.</p>

<p>The next two pieces of data relate to the content of the shout.  Topic and Tags can be set to help a broadcaster
filter, sort and manage the data in the broadcaster application.  A Topic refers to the overall subject matter of the shout.
Tags refers to one or more keywords that reflect key points within the shout.  Topic and Tags are optional and if set,
they are assigned as metadata to the shout.  If they are not set, the Shout to Me system uses IBM Watson to make its
best guess of the shout content.</p>

<ol>
  <li>StmRecorderActivity.MAX_RECORDING_TIME_IN_SECONDS - This extra is required. It defines the maximum amount of time the
  user has to record their shout. Please note that the Shout to Me system currently does not support recording times over 1 minute.</li>
  <li>StmRecorderActivity.TAGS - A comma separated list of tags that will flow through to the Broadcaster Application.</li>
  <li>StmRecorderActivity.TOPIC - A topic that will flow through to the Broadcaster Application.</li>
</ol>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">MAX_RECORDING_TIME_IN_SECONDS</span><span class="o">,</span> <span class="n">maxRecordingLengthSeconds</span><span class="o">);</span>  <span class="c1">// Required</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">TAGS</span><span class="o">,</span> <span class="n">tags</span><span class="o">);</span>                                                <span class="c1">// Optional</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">TOPIC</span><span class="o">,</span> <span class="n">topic</span><span class="o">);</span>                                              <span class="c1">// Optional</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="handling-the-activity-result-of-stmrecorderactivity">Handling the Activity result of StmRecorderActivity</h3>
<p>The StmRecorderActivity uses the standard Android Activity callback to indicate whether the Activity was closed OK, or whether
the action was cancelled.  In addition, the StmRecorderActivity will provide data to confirm whether or not the
recording process completed successfully.  The example below shows how to detect the
StmRecorderActivity.RECORD_AUDIO_PERMISSION_DENIED failure.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">MY_REQUEST_CODE</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">resultCode</span> <span class="o">==</span> <span class="n">RESULT_OK</span><span class="o">){</span>
            <span class="n">String</span> <span class="n">recordingResult</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">ACTIVITY_RESULT</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">recordingResult</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">StmService</span><span class="o">.</span><span class="na">FAILURE</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">failureReasonCode</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">ACTIVITY_REASON</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">failureReasonCode</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">StmRecorderActivity</span><span class="o">.</span><span class="na">RECORD_AUDIO_PERMISSION_DENIED</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c1">// User has not granted the RECORD_AUDIO permission</span>
                <span class="o">}</span>
            <span class="o">}</span>
       <span class="o">}</span>
       <span class="k">if</span> <span class="o">(</span><span class="n">resultCode</span> <span class="o">==</span> <span class="n">RESULT_CANCELED</span><span class="o">)</span> <span class="o">{</span>
           <span class="c1">// Activity was cancelled.</span>
       <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="uploading-a-media-file">Uploading a Media File</h2>
<p>The Shout to Me SDK allows for file uploads to create new shouts. To accomplish this, you pass the SDK a java <code class="highlighter-rouge">File</code> object along with
the optional callback if you wish to receive notification when the create shout process has completed.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">CreateShoutRequest</span> <span class="n">createShoutRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateShoutRequest</span><span class="o">();</span>
<span class="n">createShoutRequest</span><span class="o">.</span><span class="na">setFile</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">tags</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"tag 1"</span><span class="o">);</span>
<span class="n">tags</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"tag 2"</span><span class="o">);</span>
<span class="n">createShoutRequest</span><span class="o">.</span><span class="na">setTags</span><span class="o">(</span><span class="n">tags</span><span class="o">);</span>
<span class="n">createShoutRequest</span><span class="o">.</span><span class="na">setTopic</span><span class="o">(</span><span class="s">"My topic"</span><span class="o">);</span>
<span class="n">createShoutRequest</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"This is a description of the shout"</span><span class="o">);</span>

<span class="n">stmService</span><span class="o">.</span><span class="na">createShout</span><span class="o">(</span><span class="n">createShoutRequest</span><span class="o">,</span> <span class="k">new</span> <span class="n">Callback</span><span class="o">&lt;</span><span class="n">Shout</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="kd">final</span> <span class="n">StmResponse</span><span class="o">&lt;</span><span class="n">Shout</span><span class="o">&gt;</span> <span class="n">stmResponse</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Shout</span> <span class="n">shout</span> <span class="o">=</span> <span class="n">stmResponse</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">shout</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="kd">final</span> <span class="n">StmError</span> <span class="n">stmError</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Could not create shout.</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<p>For media files, there is a helper function in <code class="highlighter-rouge">CreateShoutRequest</code> that you can use to pass in a <code class="highlighter-rouge">Uri</code> instead of a <code class="highlighter-rouge">File</code>.
It requires a context in order to search the <code class="highlighter-rouge">MediaStore</code>.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">createShoutRequest</span><span class="o">.</span><span class="na">setFileFromMediaUri</span><span class="o">(</span><span class="n">mediaFileUri</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="shout">Shout</h2>
<p>The callback from StmRecorderActivity returns a Shout object.  The Shout object represents the recording a user created
and its metadata in the Shout to Me system.  This object may be used to allow the user the opportunity to review the
audio or delete the shout.</p>

<p>To delete a shout, you call the <code class="highlighter-rouge">delete()</code> method of a Shout object. You can provide a callback to inspect the status
and know when the delete process has completed.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">shout</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="k">new</span> <span class="n">Callback</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="n">StmResponse</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stmResponse</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">stmResponse</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"success"</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// Deletion of shout was successfull</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">StmError</span> <span class="n">stmError</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// An error occurred deleting shout</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

    </div>
  </div>

</div>
      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Shout to Me Android SDK</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Shout to Me Android SDK
            
            </li>
            
            <li><a href="mailto:support@shoutto.me">support@shoutto.me</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ShoutToMe"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ShoutToMe</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/shout_to_me"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">shout_to_me</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The Shout to Me Android SDK Documentation provides information, reference, and examples of how to incorporate Shout to Me platform functionality into your Android app.  
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
